{% extends "network/layout.html" %}

{% block title %}
    Post Details
{% endblock %}

{% block body %}
    <article class="media content-section" style="background-color: lightgray; border-radius: 20px; padding: 10px; margin: 10px;">
        <div class="article-metadata" style="border-bottom: none;">
            <small class="text-muted">{{ post.date_posted|date:"d F, Y" }}</small>
            <h4 class="mr-2 author_title">Post by: {{ post.author }}</h4>
            {% if object.author == user %}
                <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{% url 'post-update' object.id %}">Update</a>
                <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'post-delete' object.id %}">Delete</a>
            {% endif %}
            <div>
                <h2 class="article-title">{{ post.title }}</h2>
                <p class="article-content">{{ post.content }}</p>
                <p>Likes: {{ post.likecount }}</p>
                {% if user in post.likes.all %}
                    <form method="POST" action="{% url 'unlike-post' post.id %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger">Unlike</button>
                    </form>
                {% else %}
                    <form method="POST" action="{% url 'like-post' post.id %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-primary">Like</button>
                    </form>
                {% endif %}
            </div>
        </div>
    </article>
{% endblock body %}